body > header h1 br
  display none


smallest-letter-distance = 0.15em



@keyframes loadingRotation
    0%      { transform: rotateX(0); }
    100%    { transform: rotateX(360deg); }


/**
 * The default header on content sites
 */

body

  /**
   * The nice big header with background image.
   */
  > header
    // background main-color
    // background linear-gradient(-45deg, #6023D2, #D321AC, #F34A53)
    // background linear-gradient(-25deg, #A6318C, #E43541, #F0318B)

    // Just setting a random height before JS kicks in.
    // min-height 800px

    // In case it's supported
    height 100vh

    color white
    text-align center
    padding 2em 0

    background black no-repeat center

    background-size cover
    position relative
    perspective 600
    perspective-origin 50%

    a
      color white
      text-decoration none
      display block


    // To fade in / out the background
    &:before
      content " "
      position absolute
      top 0
      bottom 0
      left 0
      right 0
      background black
      opacity 1
      transition opacity 0.6s linear
    
      
    .links
      position absolute
      top 0
      bottom 0
      left 0
      right 0
      margin auto
      height 160px
      

    h1
      font-family "brandon-grotesque", Arial, sans-serif
      font-weight 100

      font-size 2.4em
      // The wraping is done by the <br> in the middle of the header
      white-space nowrap

      display block
      position relative
      color white
      text-shadow 1px 2px 0 rgba(0, 0, 0, 0.1)
      text-align center
      font-size 80px
      line-height 2
      height 160px
      letter-spacing 0.9em

      padding-left 0.9em /* To account for letter spacing */

      user-select none



      a
        opacity 0
        transition transform 1s ease-out, opacity 0.2s linear
        
        transform-style preserve-3d
        transform rotatex(10deg)

      // The spans are used to make the letters expand
      span
        position relative
        display inline-block

        transition transform 2s ease-out
        transform translateX(0)


body.loading-header > header h1 .loading
  opacity 1

body > header h1
  bladeHeight = 30px
  bladeWidth = 6px

  .loading
    position absolute
    display block

    opacity 0


    left 50%
    top 30%
    height bladeHeight
    width bladeWidth

    transition opacity 0.5s linear
    perspective-origin center center
    perspective 80

    .blades
      position absolute
      top 0
      left 0
      width bladeWidth
      height bladeHeight

      animation loadingRotation 1.5s linear infinite
      transform-style preserve-3d
      transform-origin center center

      .blade
        
        top 0
        left 0
        position absolute
        height bladeHeight
        width bladeWidth

        display inline-block
        background white

      rotationSteps = 15deg

      bladeDistance = 14px
      .blade1
        transform rotateX(0) translateX(-(bladeDistance/2 + bladeDistance*2))
      .blade2
        transform rotateX(rotationSteps) translateX(-(bladeDistance/2 + bladeDistance*1))
      .blade3
        transform rotateX(rotationSteps*2) translateX(-(bladeDistance/2 + bladeDistance*0))
      .blade4
        transform rotateX(rotationSteps*3) translateX((bladeDistance/2 + bladeDistance*0))
      .blade5
        transform rotateX(rotationSteps*4) translateX((bladeDistance/2 + bladeDistance*1))
      .blade6
        transform rotateX(rotationSteps*5) translateX((bladeDistance/2 + bladeDistance*2))



body.header-loaded > header
  &:before
    opacity 0
  h1
    &:after
      content ""

    .loading
      opacity 0
    a
      opacity 1
      // letter-spacing 1em
      transform rotatex(0deg)

      // In the @media query below there is another distribution
      span
        &:nth-of-type(1)
          transform translateX(-(smallest-letter-distance*5))
        &:nth-of-type(2)
          transform translateX(-(smallest-letter-distance*4))
        &:nth-of-type(3)
          transform translateX(-(smallest-letter-distance*3))
        &:nth-of-type(4)
          transform translateX(-(smallest-letter-distance*2))
        &:nth-of-type(5)
          transform translateX(-(smallest-letter-distance/2))

        &:nth-of-type(6)
          transform translateX((smallest-letter-distance/2))
        &:nth-of-type(7)
          transform translateX(smallest-letter-distance*2)
        &:nth-of-type(8)
          transform translateX(smallest-letter-distance*3)
        &:nth-of-type(9)
          transform translateX(smallest-letter-distance*4)
        &:nth-of-type(10)
          transform translateX(smallest-letter-distance*5)


        

  



@media (max-width: 1450px)
  body > header h1
    font-size 60px
  


@media (max-width: 1024px)
  body > header h1
    font-size 40px
  


@media (max-width: 768px)
  body > header h1
    font-size 30px
    br
      display block


  body.header-loaded > header h1
    // Since there is a line break now, the letters have to be distributed
    // differently    
    font-weight 300
    a
      span
        &:nth-of-type(1)
        &:nth-of-type(6)
          transform translateX(-(smallest-letter-distance*2))
        &:nth-of-type(2)
        &:nth-of-type(7)
          transform translateX(-(smallest-letter-distance*1))
        &:nth-of-type(3)
        &:nth-of-type(8)
          transform translateX(0)
        &:nth-of-type(4)
        &:nth-of-type(9)
          transform translateX((smallest-letter-distance*1))
        &:nth-of-type(5)
        &:nth-of-type(10)
          transform translateX((smallest-letter-distance*2))



  body > header h1
    font-size 30px
    height 120px

  

